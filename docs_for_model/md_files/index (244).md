# Настройки рассылки уведомлений

## Описание

С помощью настроек рассылки уведомлений возможно настроить настроить оповещения для каждого типа документов.

## Реестр

Для открытия документа необходимо в Меню в поисковой строке ввести - "Настройки рассылки уведомлений".

Откроется реестр документов.

![Рисунок 2 Реестр "Настройка документов"](./media/registry.png)

Для создания нового документа необходимо нажать на кнопку "Создать" на верхней панели инструментов.

![](./media/create.png)
## Документ

В данной форме необходимо выбрать тип и/или подтип документа, на которые будет настроены оповещения. Если указать тип и подтип документа, например "Заявление на ежегодный отпуск", то оповещения будут приходить только по указанному подтипу документа.

Если указать только тип документа, например "Заявление от сотрудника", то оповещения будут приходить по всем подтипам данного документа, например "Заявление на ежегодный отпуск", "Заявление на перенос отпуска" и т.д.

![Форма](media/form.png)

Для включения оповещений должен быть выбран как минимум один вид оповещения. Если ничего не будет выбрано, то оповещения рассылаться не будут.

На проекте реализованы следующие виды оповещений:

* **о просрочке** - при включенной опции при нарушении сроков по обработке документов пользователю на почту поступает уведомление о просроченных документах.

![Просрочка](media/delayLetter.png)

* **не ставить инициатора в копию** - по умолчанию в рассылку уведомлений о просроченных документах включаются те пользователи, которые нарушили сроки обработки документов, а также и инициатору этих документов. При включенной опции рассылка уведомлений будет направляться только пользователям, которые нарушили сроки обработки документов, без оповещения инициатора документов.

* **о просрочке руководителям** - при включенной опции при нарушении сроков обработки документов руководителю подразделения поступает уведомление со списком подчиненных, у которых есть задолженности с указанием количества просроченных документов каждого типа в первой таблице и с более подробной информацией о просроченных документах во второй.

![Просроченные документы руководителю](media/prosrochenyeDoc.png)

* **со сводкой инициатору** - при включенной опции оповещения направляются инициатору с информацией по документам, действия по которым просрочил любой пользователь из маршрута. 

![Просрочка по этапам](media/svodka.png)

* **о необходимости обработки** - при включенной опции пользователю поступает уведомление о напоминании обработки документа, по которому сроки еще не завершены. При помощи полей "за кол-во дней" и "часов" можно указать время, которое осталось до наступления срока обработки документа. В случае если они заданы, то настройка оповещения срабатывает из этого расчета. В случае если сроки не указаны, тогда дни/часы берутся из константы **Предупреждать об окончании норматива согласования за (часов)** в настройках учетной политики предприятия. Если ничего не задано, то по умолчанию - 2 дня.

![Срок обработки](media/srokObrabotki.png)

* **Учитывать списки рассылки для просрочки** - при включенной опции при нарушении сроков обработки документов уведомление будет направлено не только пользователям, которые находятся в маршруте, но и пользователям которые находятся в списке рассылки.

* **Учитывать первый этап** - по умолчанию рассылка уведомлений не распространяется на действия по маршруту из первого этапа. При включенной опции при нарушении сроков обработки документов уведомление будет направлено пользователю, который находится на первом этапе в маршруте. Например, это важно для типа "Документ на подписание", так как данный тип в системе создается автоматически и в случае если данная опция не включена, пользователю не будет поступать уведомление по данному типу документа.