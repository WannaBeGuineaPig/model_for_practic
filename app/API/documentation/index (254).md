# Рассылки системы

## Описание

В данной статье описаны типы рассылок, которые присутствуют в системе и способы их настройки. В качестве каналов оповещения могут быть использованы: электронная почта, мессенджер [Telegram](../Настройка телеграм/), SMS-сервис. 

### Включение оповещений через мессенджер Telegram и/или SMS - сервис

Чтобы получать уведомления через Telegram или SMS, необходимо выбрать соответствующий способ получения в [управлении пользователями](../Управление пользователями/) при создании/редактировании пользователя (-ей).

![Данные](media/person.png)

### Виды рассылок

#### **О поступлении документа на обработку** 

Оповещения направляются пользователю при каждом поступлении документа на обработку.  В качестве каналов оповещения могут быть использованы: электронная почта, мессенджер Telegram, SMS-сервис, браузерные уведомления. Для получения оповещений по электронной почте не требуется никаких дополнительных настроек.  Для получения оповещений через Telegram или SMS, необходимо указать способ получения, описанном [выше](#включение_оповещений_через_мессенджер_telegram_иили_sms_-_сервис). Настроить текст уведомления возможно в форме [Конструктор уведомлений](../Конструктор уведомлений/). Для включение браузерных расширений необходимо: 

* Настроить [константу](../Настройка%20констант/index.md) **СЭД_Уведомления_браузера**;
* Настроить [разрешения](https://help.mail.ru/mail/settings/notifications) на получение уведомлений в используемом браузер.
* Настроить [разрешения](https://hetmanrecovery.com/ru/recovery_news/how-to-use-and-configure-windows-10-notification-center.htm#plan_4) в системе Windows на получение уведомлений

![Оповещение о поступлении документа на обработку](media/О поступлении документа на обработку.png)

![Alt text](media/image-1.png)

![Alt text](media/image.png)

![Alt text](media/image-6.png)

#### **О необходимости ознакомиться с документом**

Оповещения направляются пользователю при каждом поступлении документа на ознакомление.  В качестве каналов оповещения могут быть использованы: электронная почта, мессенджер Telegram, SMS-сервис. Для получения оповещений по электронной почте не требуется никаких дополнительных настроек.  Для получения оповещений через Telegram или SMS, необходимо указать способ получения, описанном [выше](#включение_оповещений_через_мессенджер_telegram_иили_sms_-_сервис). Настроить текст уведомления возможно в форме [Конструктор уведомлений](../Конструктор уведомлений/).

![Alt text](media/image-3.png)

![Alt text](media/image-5.png)

#### **Оповещение замещаемому сотруднику** 

Оповещения направляются пользователям, у которых настроено [замещение](https://ecm-user-manuals.readthedocs.io/ru/latest/User%20manuals/Функция%20замещения/). В качестве канала оповещения используется электронная почта. Данное оповещение в системе настроено автоматически, дополнительная настройка не требуется.

![Замещение](media/Оповещение замещаему сотруднику.png)

<!-- #### **Оповещение инициатору по окончанию согласования документа по маршруту** 

Оповещения направляются инициатору документа по окончанию согласования документа по маршруту. В качестве канала оповещения используется электронная почта. Для получения оповещений необходимо в [настройке документов](../../Настройка документов/Настройка документов.md#опции) включить опцию "Оповещать инициатора".

![Оповещать инициатора](media/Оповещать инициатора.png)
![Оповещение инициатору](media/Оповещение инициатору по всем действиям по маршруту.png) -->

#### **Зависшие документы на этапе инициирования** 

Оповещения направляются инициатору документа, когда инициатор создал документ, но не запустил его дальше по маршруту. В качестве канала оповещения используется электронная почта. Для получения оповещений необходимо настроить задачу [**"Рассылка документов на этапе инициирования"**](../Функции планировщика задач/) в [планировщике задач](../Планировщик задач/).

![Зависший документ](media/Зависшие документы на этапе инициирования.png)

#### **Приближается срок окончания обработки документов** 

Оповещения направляются пользователю о необходимости обработки документов, по которым завершается срок обработки. В качестве каналов оповещения могут быть использованы: электронная почта и SMS-сервис. Для получения оповещений по электронной почте необходимо:

* в настройках учетной политики предприятия настроить константы: **Предупреждать об окончании норматива согласования за (дней)** и **Предупреждать об окончании норматива согласования за (часов)**. Константы могут работать как совместно, так и по отдельности. Дни и часы указываются **рабочие**.
* настроить задачу [**"Уведомления о приближающейся просрочке документов"**](../Функции планировщика задач/) в [планировщике задач](../Планировщик задач/).
Для получения оповещений по электронной почте не требуется никаких дополнительных настроек.  

Для получения оповещений через  SMS, необходимо:

* указать способ получения, описанном [выше](#включение_оповещений_через_мессенджер_telegram_иили_sms_-_сервис)
* Настроить задачу [**"Уведомления о приближающейся просрочке документов через СМС"**](../Функции планировщика задач/) в [планировщике задач](../Планировщик задач/)

![Приближается срок](media/Приближается срок окончания обработки документов.png)

![Смс](media/smsProsrochka.png)

#### **О просроченных документах**

Оповещения направляются в случае нарушения сроков по обработке документов, пользователю который нарушил сроки, а также пользователю который его замещает. В качестве каналов оповещения могут быть использованы: электронная почта и SMS-сервис. Для получения оповещений по электронной почте  необходимо:

* в настройках учетной политики предприятия настроить константы: **СЭД_Частота_уведомлений_о_просрочке_документов_дни** и **СЭД_Частота_уведомлений_о_просрочке_документов_минуты**. Константы могут работать как совместно, так и по отдельности. Дни и часы указываются **рабочие**.
* настроить задачу [**"Просроченные документы"**](../Функции планировщика задач/) в [планировщике задач](../Планировщик задач/).
  
Чтобы получать уведомления через SMS, необходимо:

* Указать способ получения, описанном [выше](#включение_оповещений_через_мессенджер_telegram_иили_sms_-_сервис)
* Настроить задачу [**"Уведомления о приближающейся просрочке документов через СМС"**](../Функции планировщика задач/) в [планировщике задач](../Планировщик задач/)

![Просроченные документы](media/Просроченные документы.png)

![Смс](media/smsProsrochka.png)

#### **О просроченных тиражированных документах**

Оповещения направляются в случае нарушения сроков по обработке тиражированных документов пользователю, который нарушил сроки. В качестве канала оповещения используется электронная почта. Для получения оповещений необходимо:

* в настройках учетной политики предприятия настроить константы: **СЭД_Частота_уведомлений_о_просрочке_тиражированных_документов_часы** и **СЭД_Частота_уведомлений_о_просрочке_тиражированных_документов_дни**.  Константы могут работать как совместно, так и по отдельности. Дни и часы указываются **рабочие**.
* настроить задачу [**"Просроченные документы"**](../Функции планировщика задач/) в [планировщике задач](../Планировщик задач/).

#### **О просроченных документах сотрудников руководителю**

Оповещения направляются руководителю сотрудников в случае нарушения ими сроков по обработке документов. В качестве канала оповещения используется электронная почта. Для получения оповещений необходимо настроить задачу [**"Рассылка просроченных документов руководителям"**](../Функции планировщика задач/) в [планировщике задач](../Планировщик задач/).

![Просроченные задачи руководителю](media/Просроченные документы работников (руководителю).png)

#### **Сводка по документам с просроченными действиями по маршруту/ознакомлению**

Оповещения направляются инициатору с информацией по документам, действия по которым просрочил любой из маршрута. В качестве канала оповещения используется электронная почта. Для получения оповещений необходимо:

* В [настройках рассылки уведомлений](../Настройки рассылки уведомлений/) включить опцию **Со сводкой инициатору**;
* Настроить задачу [**Рассылка сводки по просроченным документам их инициаторам**](../Функции планировщика задач/) в [планировщике задач](../Планировщик задач/).

![Сводка](media/svodka.png)

#### **Заявка на регистрацию в Личном кабинете работника**

Оповещения направляются модератору системы при поступлении заявки на регистрацию через сайт [**саморегистрации**](https://ecm-user-manuals.readthedocs.io/ru/latest/User%20manuals/Авторизация%20через%20сайт%20регистрации/). В качестве канала оповещения используется электронная почта. Для получения оповещений не требуется никаких дополнительных настроек.

![Сайт саморегистрации](media/Заявка на регистрацию в Личном кабинете работника.png)

#### **Регистрация в системе кадрового электронного документооборота**

Оповещения направляются новому пользователю при регистрации его в системе. В качестве каналов оповещения могут быть использованы: электронная почта и SMS-сервис. Для получения оповещений по электронной почте не требуется дополнительных настроек. Чтобы получать уведомления через SMS, необходимо указать способ получения, описанном [выше](#включение_оповещений_через_мессенджер_telegram_иили_sms_-_сервис).

Пользователя в системе можно зарегистрировать двумя способами:

* **Ручной** - через [управление пользователями](../Управление пользователями/#создание_пользователя). При ручном создании пользователей дополнительная настройка не требуется.
* [**Автоматизированный**](../Автоматическое создание пользователей/) - с помощью задачи [**"Создание новых пользователей"**](../Функции планировщика задач/) в [планировщике задач](../Планировщик задач/). При автоматизированном создании пользователей, в настройках учетной политики предприятия необходимо настроить константу **УпрП_уведомление_о_создание_УЗ** для направления оповещения новому пользователю о регистрации в системе.

![Регистрация в системе](media/Регистрация в системе электронного документооборота.png)

![Alt text](media/image-2.png)

#### [**Напоминание о регистрации в системе**](../Автоматическое создание пользователей/#повторное_уведомление_пользователя_о_регистрации_пользователя)

Оповещения направляются пользователям, которые зарегистрированы в системе, но не прошли авторизацию. В качестве канала оповещения используется электронная почта. Для получения оповещений необходимо:

* настроить задачу [**"Напоминание о входе в систему неактивированным пользователям"**](../Функции планировщика задач/) в [планировщике задач](../Планировщик задач/);
* в настройках учетной политики предприятия настроить константу **УпрП_напоминание_о_созданной_УЗ**.

![Напоминание](media/Регистрация в системе электронного документооборота_напоминание.png)

Также данное оповещение направляется пользователям, которые дали согласие на кадровый электронный документооборот, но также не зарегистрировались в системе. Для получения оповещений необходимо:

* настроить задачу [**"Напоминание о входе в систему неактивированным пользователям"**](../Функции планировщика задач/) в [планировщике задач](../Планировщик задач/), если она не была настроена ранее;
* в настройках учетной политики предприятия настроить константу **ПереходНаКЭДО_НапоминаниеОбОригинале**.

![Напоминание по КЭДО](media/Оповещение о необходимости сдачи оригиналов заявления и расписки на ЭП.png)

#### **Напоминание о необходимости сдачи заявления на выпущенный  ЭП в отдел кадров**

Оповещения направляются пользователям, у которых есть выпущенный, не отозванный сертификат электронной подписи, но отсутствует [отметка](../Выпуск ОНЭП/#просмотр_заявки_на_выпуск_сертификатов) об сдаче заявления на выпуск сертификата и расписки в получении. В качестве канала оповещения используется электронная почта. Для получения оповещений необходимо:

* настроить задачу [**"Напоминание о необходимости сдачи заявления на сертификат в отдел кадров"**](../Функции планировщика задач/) в [планировщике задач](../Планировщик задач/);

![Электронный сертификат](media/Электронный сертификат.png)

#### Восстановление пароля

Оповещения направляются пользователям при первичной авторизации в системе, а также при восстановлении пароля в системе. В качестве каналов оповещения могут быть использованы: электронная почта и SMS-сервис. Для получения оповещений по электронной почте не требуется дополнительных настроек. Чтобы получать уведомления через SMS, необходимо указать способ получения, описанном [выше](#включение_оповещений_через_мессенджер_telegram_иили_sms_-_сервис).

![Восстановление пароля](media/vosstanovlenie.png)

![СМС](media/vosstanSMS.png)

#### **О перевыпуске сертификата НЭП**

Оповещения направляются пользователям, у которых заканчивается срок действия сертификата ЭП и которым были автоматически перевыпущены новые сертификаты. В качестве каналов оповещения могут быть использованы: электронная почта, мессенджер Telegram, SMS-сервис. Для получения оповещений необходимо:

* настроить задачу [**"Выпуск новых сертификатов, когда истекают сроки"**](../Функции планировщика задач/) в [планировщике задач](../Планировщик задач/);
* в настройках учетной политики предприятия настроить константу **ЭЦП_количество_дней_за_сколько_отправтить_заявку_на_перевыпуск**, где указывается значение количества дней по которому нужно проверять сертификаты. Если текущая дата меньше даты окончания действующего ЭП либо равна константе - то по каждому работнику автоматически формируется документ "Заявка на выпуск" с новым выпущенным сертификатом, с заявлением на выдачу сертификата, распиской в получении сертификата.

![НЭП](../Конструктор уведомлений/media/nep3.png)

#### **Уведомления по форме корректировки маршрутов**

Оповещения направляются пользователям, которые были скорректированы в [форме согласования маршрутов](https://ecm-user-manuals.readthedocs.io/ru/latest/User%20manuals/Форма%20корректировки%20маршрутов%20согласования/). В качестве каналов оповещения могут быть использованы: электронная почта, мессенджер Telegram, SMS-сервис. Для получения оповещений по электронной почте не требуется никаких дополнительных настроек. 

**О поступлении в работу:**

![Форма](../Конструктор уведомлений/media/correctPostup3.png)

**Удаление из маршрута**

![Удаление](../Конструктор уведомлений/media/deleteMail.png)

**Возврат на предыдущий этап**

![Возврат](../Конструктор уведомлений/media/return.png)

#### **О настроенных пользователю замещениях**

Оповещения направляются пользователям, которым были назначены [замещения](https://ecm-user-manuals.readthedocs.io/ru/latest/User%20manuals/Функция%20замещения/). В качестве каналов оповещения могут быть использованы: электронная почта и SMS-сервис. Для получения оповещений по электронной почте не требуется никаких дополнительных настроек.

![Замещение](media/zamesh.png)
 
#### Внутрисистемные уведомления

На проекте есть возможность настроить внутрисистемные уведомления для пользователей. Подробнее о настройке можно ознакомиться в статье ["Настройка внутрисистемных уведомлений"](../Настройка внутрисистемных уведомлений/)

Примеры уведомлений:

* [**О приближении начала отпуска по основному месту работы:**](../Настройка внутрисистемных уведомлений/)

![Отпуск](media/otpuskOsnovnoi.png)

* [**Оповещение о списке работников, которые не создали заявление об отпуске**](../Настройка внутрисистемных уведомлений/#оповещение_о_списке_работников_которые_не_создали_заявление_об_отпуске)

![Кадровик](media/hr.png)

* [**О приближении начала отпуска по внутреннему месту работы:**](../Настройка внутрисистемных уведомлений/#уведомления_об_отпуске_на_основании_графика_отпусков_по_внутренним_совместителям)

![Внутренний](media/otpuskVnutren.png)

* [**О приближении начала отпуска по внешнему месту работы:**](../Настройка внутрисистемных уведомлений/#уведомления_об_отпуске_на_основании_графика_отпусков_по_внешним_совместителям)

![Отпуск внешний](media/otpuskVnesh.png)

* [**Документы, которые не были выгружены в систему из 1С:**](../Настройка внутрисистемных уведомлений/#документы_не_пришедшие_на_подписание_в_систему_из_1с)

![1С](media/1C.png)

* [**Об окончании испытательного срока сотрудников:**](../Настройка внутрисистемных уведомлений/#об_окончании_испытательного_срока)

![Испытательный срок](media/ИспытательныйСрок.png)

* [**Отсутствие планового графика отпусков по подразделению**](../Настройка внутрисистемных уведомлений/#отсутствие_планового_графика_отпусков_по_подразделению)

![Отсутствие графика](media/otsutstviePlanOtpusk.png)

* [**Оповещение о необходимости замены паспорта**](../Настройка внутрисистемных уведомлений/#оповещение_о_необходимости_замены_паспорта)

![Паспорт](media/passport.png)

* [**Сообщение о приближающихся юбилеях**](../Настройка внутрисистемных уведомлений/#сообщение_о_приближающихся_юбилеях)

![Юбилей](media/yubiley.png)

* [**Сообщения о приближающемся юбилее работы в компании**](../Настройка внутрисистемных уведомлений/#сообщение_о_приближающихся_юбилеях#сообщения_о_приближающемся_юбилее_работы_в_компании)

![Юбилей в компании](media/yubileyCompan.png)

* [**Уведомление HR о перевыпуске сертификата в связи с изменением ФИО**](../Настройка внутрисистемных уведомлений/#уведомление_о_перевыпуске_сертификата_в_связи_с_изменением_фио)

![Сертификаты](media/certs.png)